@model SignalRSQLAdmin.Web.Areas.SignalRSQLAdmin.Models.TableModel

@{
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Home";
}

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.1.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script type="text/javascript" src="~/Scripts/signalR.js"></script>
}
<a href="#" id="deleteTableTest" class="btn btn-danger" data-name="@Model.Name.Substring(Model.Name.LastIndexOf('.') + 1)">Delete test table</a>

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        @Model.Name
        <small>specifications</small>
    </h1>

    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> @ViewBag.dbName</a></li>
        <li><a href="#">Tables</a></li>
        <li class="active">@Model.Name</li>
    </ol>

</section>
<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Table Structure : @Model.Name , @Model.Type</h3>
                </div><!-- /.box-header -->
                <div class="box-body table-responsive">
                    <table id="example2" class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Max Length</th>
                                <th>Is Null</th>
                                <th>Is Primary Key</th>
                               
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var f in Model.Fields)
                            {
                                <tr>
                                    <td>@f.Name</td>
                                    <td>@f.Type</td>
                                    <td>@f.MaxLength</td>
                                    <td>@f.IsNullable</td>
                                    <td>@f.IsPrimaryKey</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div><!-- /.box-body -->
            </div><!-- /.box -->
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Table Content</h3>
                </div><!-- /.box-header -->
                <div class="box-body table-responsive">
                    <table id="example1" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                @foreach (var f in Model.Fields)
                                { 
                                    <th>@f.Name</th>
                                }
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.FirstRows.Any())
                            {
                                foreach (var r in Model.FirstRows)
                                {
                                    <tr>
                                        @foreach (var value in r)
                                        {
                                            <td>@value</td>
                                        }
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan=@Model.Fields.Count style="text-align:center;">Empty Table</td>
                                </tr>
                            }
                        </tbody>
                        <tfoot>
                            <tr>
                                @foreach (var f in Model.Fields)
                                {
                                    <th> @f.Name</th>
                                }
                            </tr>
                        </tfoot>
                    </table>
                </div><!-- /.box-body -->
            </div><!-- /.box -->
        </div>
    </div>
</section>